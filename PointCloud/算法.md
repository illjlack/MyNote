## 八叉树

八叉树将三维空间递归地分割成较小的立方体区域，每个立方体最多有八个子立方体。

##### 结构

**节点**：每个八叉树的节点表示一个立方体区域，可以存储与该区域相关的数据。

**分割**：每个节点最多有8个子节点，每个子节点代表父节点区域的一个子立方体。这种分割是递归的，直到达到一个停止条件（节点中存储的元素较少或空，或者空间达到某个最小单位(体素)）。

**层级**：八叉树是一个树状结构，根节点代表整个三维空间，随着树的深入，每一层都表示更细分的空间。



## KD树

KD树（K-Dimensional Tree）是一种用于存储k维空间数据的树状数据结构。它通过递归地将空间划分为较小的区域，从而使得空间中的点可以被高效地查询、插入和删除。通常用于高维空间中的搜索、最近邻查询、范围查询等操作。

##### 结构

**节点**：KD树的每个节点代表一个数据点，并且每个节点的每个子节点代表数据空间的一个划分。

**分割**：KD树在每一层根据数据的某个维度来划分空间。每个节点通过选择一个维度上的**中位数**来将空间分割为两半。此分割过程是递归的，直到达到一个停止条件（例如，节点中数据点数量较少，或者空间达到某个最小单位）。

**层级**：KD树是一个二叉树，每个节点有两个子节点。树的每一层都使用不同的维度进行分割，通常交替使用各维度。对于二维空间，第一层分割可能基于x轴，第二层基于y轴，以此类推。



## **主成分分析**

（Principal Component Analysis，**PCA**）

PCA的基本目标是从一组多维数据中找出其主要的变化方向，并通过这些主方向来简化数据的表示，同时保留数据中的大部分信息。

可以用来分析一组点云的主要方向，次要方向。

特征值越小，表示数据在该方向上的变化非常剧烈，表明该方向上的变化非常显著。

##### 数学原理

PCA的核心数学思想是找到一组正交的基向量（主成分），使得数据在这些基向量方向上的方差最大。具体步骤如下：

- **数据矩阵**：假设我们有一个数据集，包含 `n` 个样本，每个样本有 `d` 个特征。将数据表示为一个 `n x d` 的矩阵`X`，其中每一行表示一个数据样本，每一列表示一个特征。

- **中心化数据**：去除每个特征的均值，使得数据的均值为零。可以通过计算每列的均值，并减去该均值来实现数据的中心化。

- **协方差矩阵**：计算协方差矩阵 `C`：

  $C= \frac{1}{n-1} X^T $

  其中，`X` 是中心化后的数据矩阵。

- **特征值分解**：对协方差矩阵 `C` 进行特征值分解，得到特征值 $\lambda_1, \lambda_2, \dots, \lambda_d $和特征向量$ v_1, v_2, \dots, v_d$。

- **选择主成分**：选择具有最大特征值的特征向量作为主成分。通常选择前 `k` 个特征向量，形成一个新的特征空间。

- **投影**：将数据投影到这些选择的主成分上，得到降维后的数据。



## 点云的法向量

法向量是与点云表面上某个点的切平面垂直的向量。简单来说，法向量是描述点云表面朝向的向量，通常用于表示表面的方向和几何形状。

- 在三维空间中，对于一个表面上的点，其法向量是与该点附近的表面切平面垂直的向量。
- 法向量可以用于推断表面的方向、光照计算、碰撞检测等。

##### 计算法向量

1. 通过邻域点估计

   - 对于点云中的一个点，我们通常会通过它的邻域点（**k近邻** 或 **搜索半径** 来确定邻域）来估计法向量。常用的方式是通过 **PCA（主成分分析）** 来计算法向量（取最小的特征值对应的特征向量）。

   （感觉还是这个靠谱）

2. 使用平面拟合

   - 另一种常见的方法是拟合一个局部平面。通过最小二乘法拟合邻域点集合，得到平面的法向量。





## 点云的曲率

对于一个平面曲线，曲率定义为该曲线的**弯曲率**，即曲线在某一点的瞬时曲率。具体来说，曲率 k 在某一点 P 的定义为：

$k = \frac{1}{\rho}$

曲率可以帮助我们理解表面的形状和复杂性。

- **高斯曲率**（Gaussian Curvature）：是通过两个主曲率的乘积来定义的，通常用于描述在点处表面的弯曲程度。
- **平均曲率**（Mean Curvature）：是两个主曲率的平均值，描述了表面相对于平面或球面弯曲的性质。
- **主曲率**：曲面在某一点的最大和最小曲率，主曲率对应于表面在特定方向上的曲率。

##### 计算曲率

1. **局部邻域法**：
   - 计算点云中的每个点的邻域点，拟合一个局部曲面，使用该曲面的曲率来估计。
   - 通常使用 **最小二乘法** 或 **拟合方法** 来计算该局部曲面的曲率。
2. **PCA法**：
   - 类似于法向量的计算，**主成分分析**（PCA）也可以用来估计点云的曲率。通过对邻域点的协方差矩阵进行特征值分解，得到曲率的信息。
   - 主成分分析中的 **特征值** 表示点云在各个方向的散布程度，较小的特征值(特征值越小，表示数据在该方向上的变化非常剧烈，表明该方向上的变化非常显著)通常对应着曲率较大的方向。





